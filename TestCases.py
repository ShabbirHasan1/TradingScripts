from upstox_api.api import *

import PatternRecognition as pr

u = Upstox ('5LfPWD6ZJh8MqTeHvikvU6USVnK6w1uk7imllV2z', 'd49d1203603cabe85d3437423820a726c833d3ca')
u.get_master_contract('NSE_EQ')
#today=datetime.today();
#bullish marubozu test case
#diff_between_start_end_date=11
#end_date=datetime(2018, 8, 17);
#start_date=datetime.now() - timedelta(days=diff_between_start_end_date)
#start_date=start_date.date()

print ("bullish marubozu test case start##########")
#bullish_marubozu_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'SICAL'), OHLCInterval.Day_1, datetime(2018,8, 21).date(), datetime(2018, 9, 5).date())
bullish_marubozu_OHLCdata=[{'timestamp': 1535308200000, 'open': 168.5, 'high': 171.35, 'low': 161.5, 'close': 163.75, 'volume': 39668, 'cp': 163.6}, {'timestamp': 1535394600000, 'open': 164.5, 'high': 166.15, 'low': 163.15, 'close': 165.65, 'volume': 7705, 'cp': 165.2}, {'timestamp': 1535481000000, 'open': 164.55, 'high': 167.5, 'low': 162.8, 'close': 163.85, 'volume': 6626, 'cp': 163}, {'timestamp': 1535567400000, 'open': 164, 'high': 166, 'low': 161, 'close': 165, 'volume': 17158, 'cp': 165}, {'timestamp': 1535653800000, 'open': 166, 'high': 171.9, 'low': 165, 'close': 167, 'volume': 17864, 'cp': 166.1}, {'timestamp': 1535913000000, 'open': 168, 'high': 170, 'low': 166.55, 'close': 167.65, 'volume': 13018, 'cp': 168.85}, {'timestamp': 1535999400000, 'open': 167.5, 'high': 171, 'low': 167.5, 'close': 169.2, 'volume': 14890, 'cp': 170.95}, {'timestamp': 1536085800000, 'open': 170, 'high': 203, 'low': 170, 'close': 201.2, 'volume': 1739843, 'cp': 203}]
#print (bullish_marubozu_OHLCdata)
bullish_marubozu_res=pr.Recognize_Bullish_Marubozo(bullish_marubozu_OHLCdata,154,216,pr.calculate_rsi(bullish_marubozu_OHLCdata))
print(bullish_marubozu_res)
print ("bullish marubozu test case end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bearish marubozu test case start##########")
#bearish_marubozu_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'INFY'), OHLCInterval.Day_1, datetime(2018,8, 21).date(), datetime(2018, 9, 5).date())

bearish_marubozu_OHLCdata=[{'timestamp': 1534789800000, 'open': 1390, 'high': 1396, 'low': 1373.75, 'close': 1383.95, 'volume': 4180741, 'cp': 1386}, {'timestamp': 1534962600000, 'open': 1393, 'high': 1401.5, 'low': 1385.35, 'close': 1397.4, 'volume': 3858591, 'cp': 1400}, {'timestamp': 1535049000000, 'open': 1396.5, 'high': 1401.9, 'low': 1376.1, 'close': 1378.3, 'volume': 3526500, 'cp': 1379.35}, {'timestamp': 1535308200000, 'open': 1383, 'high': 1419.95, 'low': 1381.4, 'close': 1415.4, 'volume': 3506475, 'cp': 1416}, {'timestamp': 1535394600000, 'open': 1417.2, 'high': 1438.4, 'low': 1411.5, 'close': 1424.7, 'volume': 3248445, 'cp': 1425}, {'timestamp': 1535481000000, 'open': 1433.6, 'high': 1433.6, 'low': 1405.15, 'close': 1410.1, 'volume': 2823248, 'cp': 1411}, {'timestamp': 1535567400000, 'open': 1412.8, 'high': 1421.55, 'low': 1396.15, 'close': 1416.2, 'volume': 5753981, 'cp': 1418.1}, {'timestamp': 1535653800000, 'open': 1425.1, 'high': 1454.3, 'low': 1421.1, 'close': 1441.1, 'volume': 5437932, 'cp': 1440}, {'timestamp': 1535913000000, 'open': 1449, 'high': 1467.9, 'low': 1430, 'close': 1434.25, 'volume': 5488164, 'cp': 1436.2}, {'timestamp': 1535999400000, 'open': 722, 'high': 748.5, 'low': 716, 'close': 737.15, 'volume': 15370124, 'cp': 733}, {'timestamp': 1536085800000, 'open': 741.95, 'high': 744.05, 'low': 725.4, 'close': 729.9, 'volume': 8658978, 'cp': 729}]
#print (bearish_marubozu_OHLCdata)
bearish_marubozu_res=pr.Recognize_Bearish_Marubozo(bearish_marubozu_OHLCdata,715,739,pr.calculate_rsi(bearish_marubozu_OHLCdata))
print(bearish_marubozu_res)
print ("bearish marubozu test case end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("hammer test case 1 start##########")
#hammer1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'HITECHCORP'), OHLCInterval.Day_1, datetime(2018,7, 21).date(), datetime(2018, 8, 17).date())
hammer1_OHLCdata=[{'timestamp': 1532284200000, 'open': 143.95, 'high': 156, 'low': 140.05, 'close': 151.45, 'volume': 9590, 'cp': 151.8}, {'timestamp': 1532370600000, 'open': 151.5, 'high': 151.5, 'low': 142.05, 'close': 144.2, 'volume': 5359, 'cp': 143.1}, {'timestamp': 1532457000000, 'open': 145.85, 'high': 145.85, 'low': 144, 'close': 144.15, 'volume': 1585, 'cp': 144}, {'timestamp': 1532543400000, 'open': 143, 'high': 145, 'low': 138.5, 'close': 139.2, 'volume': 4343, 'cp': 139.1}, {'timestamp': 1532629800000, 'open': 139.5, 'high': 143, 'low': 139.5, 'close': 140.05, 'volume': 910, 'cp': 140.05}, {'timestamp': 1532889000000, 'open': 140, 'high': 141.8, 'low': 138.95, 'close': 139.95, 'volume': 6521, 'cp': 140}, {'timestamp': 1532975400000, 'open': 139.85, 'high': 139.9, 'low': 137.5, 'close': 139.85, 'volume': 595, 'cp': 139.9}, {'timestamp': 1533061800000, 'open': 139, 'high': 140.7, 'low': 136.4, 'close': 138.6, 'volume': 2311, 'cp': 138.55}, {'timestamp': 1533148200000, 'open': 138.05, 'high': 139.95, 'low': 138.05, 'close': 138.6, 'volume': 563, 'cp': 139.75}, {'timestamp': 1533234600000, 'open': 138.05, 'high': 139.9, 'low': 131.95, 'close': 136.8, 'volume': 8165, 'cp': 137.9}, {'timestamp': 1533493800000, 'open': 137.95, 'high': 140, 'low': 137, 'close': 138.2, 'volume': 3790, 'cp': 138.95}, {'timestamp': 1533580200000, 'open': 140, 'high': 140, 'low': 137, 'close': 139.55, 'volume': 2419, 'cp': 137.05}, {'timestamp': 1533666600000, 'open': 140, 'high': 141, 'low': 136.05, 'close': 138.75, 'volume': 3773, 'cp': 138.75}, {'timestamp': 1533753000000, 'open': 137, 'high': 137.95, 'low': 134.1, 'close': 134.7, 'volume': 7699, 'cp': 134.6}, {'timestamp': 1533839400000, 'open': 135, 'high': 135.1, 'low': 134.05, 'close': 135, 'volume': 7616, 'cp': 135}, {'timestamp': 1534098600000, 'open': 134.05, 'high': 135, 'low': 128, 'close': 128.2, 'volume': 8367, 'cp': 128}, {'timestamp': 1534185000000, 'open': 127, 'high': 132.9, 'low': 126.05, 'close': 131.55, 'volume': 7816, 'cp': 132.9}, {'timestamp': 1534357800000, 'open': 130.05, 'high': 132, 'low': 128.75, 'close': 132, 'volume': 1904, 'cp': 132}, {'timestamp': 1534444200000, 'open': 130.15, 'high': 135, 'low': 130.15, 'close': 134.7, 'volume': 2715, 'cp': 135}]
#print (hammer1_OHLCdata)
hammer1_res=pr.Recognize_Hammer(hammer1_OHLCdata,141,126,pr.calculate_rsi(hammer1_OHLCdata))
print(hammer1_res)
print ("hammer test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("hammer test case 2 start##########")
#hammer2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'IOB'), OHLCInterval.Day_1, datetime(2018,8, 1).date(), datetime(2018, 8, 24).date())
hammer2_OHLCdata=[{'timestamp': 1533061800000, 'open': 14.9, 'high': 15.15, 'low': 14.85, 'close': 15.05, 'volume': 502361, 'cp': 14.95}, {'timestamp': 1533148200000, 'open': 15, 'high': 15.2, 'low': 14.7, 'close': 14.85, 'volume': 567315, 'cp': 14.9}, {'timestamp': 1533234600000, 'open': 15.05, 'high': 15.3, 'low': 14.9, 'close': 15, 'volume': 775739, 'cp': 14.9}, {'timestamp': 1533493800000, 'open': 15, 'high': 16.4, 'low': 15, 'close': 15.85, 'volume': 1826184, 'cp': 15.8}, {'timestamp': 1533580200000, 'open': 16, 'high': 16, 'low': 15.35, 'close': 15.4, 'volume': 700183, 'cp': 15.4}, {'timestamp': 1533666600000, 'open': 15.5, 'high': 15.65, 'low': 15.05, 'close': 15.15, 'volume': 439825, 'cp': 15.15}, {'timestamp': 1533753000000, 'open': 16.45, 'high': 16.5, 'low': 15.7, 'close': 16.1, 'volume': 2825517, 'cp': 16.1}, {'timestamp': 1533839400000, 'open': 16.1, 'high': 16.2, 'low': 15.75, 'close': 15.9, 'volume': 1112157, 'cp': 15.85}, {'timestamp': 1534098600000, 'open': 15.7, 'high': 16.05, 'low': 15.45, 'close': 15.7, 'volume': 473631, 'cp': 15.75}, {'timestamp': 1534185000000, 'open': 15.7, 'high': 16, 'low': 15.55, 'close': 15.6, 'volume': 556818, 'cp': 15.6}, {'timestamp': 1534357800000, 'open': 15.65, 'high': 15.7, 'low': 15.3, 'close': 15.3, 'volume': 411513, 'cp': 15.3}, {'timestamp': 1534444200000, 'open': 15.45, 'high': 15.6, 'low': 15.2, 'close': 15.35, 'volume': 561085, 'cp': 15.35}, {'timestamp': 1534703400000, 'open': 15.3, 'high': 16.05, 'low': 15.3, 'close': 15.5, 'volume': 355993, 'cp': 15.55}, {'timestamp': 1534789800000, 'open': 15.5, 'high': 15.65, 'low': 15.35, 'close': 15.4, 'volume': 298470, 'cp': 15.4}, {'timestamp': 1534962600000, 'open': 15.55, 'high': 15.6, 'low': 15.15, 'close': 15.25, 'volume': 605063, 'cp': 15.2}, {'timestamp': 1535049000000, 'open': 15.3, 'high': 15.35, 'low': 12.2, 'close': 14.9, 'volume': 1323598, 'cp': 14.8}]
#print (hammer2_OHLCdata)
hammer2_res=pr.Recognize_Hammer(hammer2_OHLCdata,14.7,16.5,pr.calculate_rsi(hammer2_OHLCdata))
print(hammer2_res)
print ("hammer test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("hanging man test case 1 start##########")
#hanging_man_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'PETRONENGG'), OHLCInterval.Day_1, datetime(2018,8, 20).date(), datetime(2018, 9, 6).date())
hanging_man_OHLCdata=[{'timestamp': 1534703400000, 'open': 41.25, 'high': 42, 'low': 39.2, 'close': 41.2, 'volume': 1908, 'cp': 41.7}, {'timestamp': 1534789800000, 'open': 39.7, 'high': 42.7, 'low': 39.7, 'close': 41.6, 'volume': 1295, 'cp': 41.6}, {'timestamp': 1534962600000, 'open': 41.5, 'high': 41.5, 'low': 39.75, 'close': 40.25, 'volume': 4235, 'cp': 39.8}, {'timestamp': 1535049000000, 'open': 40.2, 'high': 41.6, 'low': 38.25, 'close': 38.45, 'volume': 4695, 'cp': 38.25}, {'timestamp': 1535308200000, 'open': 38.25, 'high': 39.9, 'low': 37.25, 'close': 39.5, 'volume': 8307, 'cp': 39.6}, {'timestamp': 1535394600000, 'open': 38.2, 'high': 40.55, 'low': 38.2, 'close': 38.6, 'volume': 1880, 'cp': 38.3}, {'timestamp': 1535481000000, 'open': 38, 'high': 40, 'low': 37.35, 'close': 37.95, 'volume': 1121, 'cp': 37.35}, {'timestamp': 1535567400000, 'open': 39.75, 'high': 39.8, 'low': 37.05, 'close': 38.3, 'volume': 5196, 'cp': 38}, {'timestamp': 1535653800000, 'open': 40, 'high': 40.2, 'low': 40, 'close': 40.2, 'volume': 1553, 'cp': 40.2}, {'timestamp': 1535913000000, 'open': 42.2, 'high': 42.2, 'low': 42.2, 'close': 42.2, 'volume': 1756, 'cp': 42.2}, {'timestamp': 1535999400000, 'open': 44.3, 'high': 44.3, 'low': 44.3, 'close': 44.3, 'volume': 1495, 'cp': 44.3}, {'timestamp': 1536085800000, 'open': 46.5, 'high': 46.5, 'low': 45, 'close': 46.5, 'volume': 9362, 'cp': 46.5}, {'timestamp': 1536172200000, 'open': 48.45, 'high': 48.8, 'low': 45.1, 'close': 48.8, 'volume': 11421, 'cp': 48.8}]
#print (hanging_man_OHLCdata)
hanging_man_res=pr.Recognize_Hanging_Man(hanging_man_OHLCdata,38.5,53.5,pr.calculate_rsi(hanging_man_OHLCdata))
print(hanging_man_res)
print ("hanging man test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("hanging man test case 2 start##########")
#hanging_man2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'BOSCHLTD'), OHLCInterval.Day_1, datetime(2017,9, 20).date(), datetime(2017, 10, 17).date())
hanging_man2_OHLCdata=[{'timestamp': 1505845800000, 'open': 21921, 'high': 21921, 'low': 21745, 'close': 21823.4, 'volume': 7204, 'cp': 21785}, {'timestamp': 1505932200000, 'open': 21825, 'high': 21875.35, 'low': 21501, 'close': 21557.9, 'volume': 9984, 'cp': 21501}, {'timestamp': 1506018600000, 'open': 21500, 'high': 21690, 'low': 21302, 'close': 21495.05, 'volume': 8371, 'cp': 21420}, {'timestamp': 1506277800000, 'open': 21452.05, 'high': 21454.45, 'low': 21011, 'close': 21172.55, 'volume': 10917, 'cp': 21011}, {'timestamp': 1506364200000, 'open': 21110, 'high': 21525, 'low': 21012, 'close': 21495.6, 'volume': 12367, 'cp': 21500}, {'timestamp': 1506450600000, 'open': 21586, 'high': 21899.95, 'low': 21000, 'close': 21112.55, 'volume': 13426, 'cp': 21090}, {'timestamp': 1506537000000, 'open': 21200, 'high': 21299, 'low': 20567.65, 'close': 20682.45, 'volume': 14920, 'cp': 20612}, {'timestamp': 1506623400000, 'open': 20882, 'high': 20882, 'low': 20450, 'close': 20545.1, 'volume': 11104, 'cp': 20500}, {'timestamp': 1506969000000, 'open': 20935, 'high': 20935, 'low': 20350, 'close': 20397.8, 'volume': 7396, 'cp': 20350.05}, {'timestamp': 1507055400000, 'open': 20402, 'high': 20800.8, 'low': 20402, 'close': 20707, 'volume': 11848, 'cp': 20665}, {'timestamp': 1507141800000, 'open': 20709, 'high': 20919.95, 'low': 20657.75, 'close': 20782.8, 'volume': 11954, 'cp': 20800}, {'timestamp': 1507228200000, 'open': 20820, 'high': 21120, 'low': 20820, 'close': 21073.6, 'volume': 14988, 'cp': 21050}, {'timestamp': 1507487400000, 'open': 21050, 'high': 21332.05, 'low': 20858, 'close': 21276.6, 'volume': 5886, 'cp': 21220.25}, {'timestamp': 1507573800000, 'open': 21289, 'high': 21299, 'low': 21055.2, 'close': 21226.6, 'volume': 10886, 'cp': 21225}, {'timestamp': 1507660200000, 'open': 21350, 'high': 21379.95, 'low': 20875.6, 'close': 21148.1, 'volume': 7937, 'cp': 21046.6}, {'timestamp': 1507746600000, 'open': 21101, 'high': 21216.7, 'low': 20998.95, 'close': 21158.95, 'volume': 8791, 'cp': 21168.75}, {'timestamp': 1507833000000, 'open': 21122, 'high': 21700, 'low': 21122, 'close': 21571.6, 'volume': 7313, 'cp': 21699.9}, {'timestamp': 1508092200000, 'open': 21650, 'high': 22243.3, 'low': 21605.6, 'close': 22199.3, 'volume': 16245, 'cp': 22160}, {'timestamp': 1508178600000, 'open': 22165.55, 'high': 22195, 'low': 21885.15, 'close': 22095.2, 'volume': 11107, 'cp': 22195}]
#print (hanging_man2_OHLCdata)
hanging_man2_res=pr.Recognize_Hanging_Man(hanging_man2_OHLCdata,21605.60,22650.00,pr.calculate_rsi(hanging_man2_OHLCdata))
print(hanging_man2_res)
print ("hanging man test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("shooting star test case 1 start##########")
#shooting_star_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'HINDALCO'), OHLCInterval.Day_1, datetime(2017,5, 5).date(), datetime(2017, 5, 30).date())
shooting_star_OHLCdata=[{'timestamp': 1493922600000, 'open': 192, 'high': 192, 'low': 183.4, 'close': 185.8, 'volume': 19912601, 'cp': 185.6}, {'timestamp': 1494181800000, 'open': 187.6, 'high': 187.9, 'low': 181.6, 'close': 184.2, 'volume': 15591759, 'cp': 184.55}, {'timestamp': 1494268200000, 'open': 184.55, 'high': 188.6, 'low': 183.1, 'close': 186.4, 'volume': 11355111, 'cp': 186}, {'timestamp': 1494354600000, 'open': 187, 'high': 188.55, 'low': 185.45, 'close': 187.1, 'volume': 9459887, 'cp': 187.25}, {'timestamp': 1494441000000, 'open': 193.35, 'high': 195.8, 'low': 192.05, 'close': 193.65, 'volume': 23026210, 'cp': 193.45}, {'timestamp': 1494527400000, 'open': 194.75, 'high': 195.35, 'low': 189.15, 'close': 191.05, 'volume': 11231977, 'cp': 191.4}, {'timestamp': 1494786600000, 'open': 191.95, 'high': 199.9, 'low': 191.9, 'close': 198.45, 'volume': 18159344, 'cp': 198.7}, {'timestamp': 1494873000000, 'open': 198.65, 'high': 198.85, 'low': 195.5, 'close': 196.5, 'volume': 10068622, 'cp': 196.9}, {'timestamp': 1494959400000, 'open': 196.1, 'high': 200.35, 'low': 196.1, 'close': 198.85, 'volume': 10643485, 'cp': 198.25}, {'timestamp': 1495045800000, 'open': 196, 'high': 196.7, 'low': 192.3, 'close': 194, 'volume': 13959394, 'cp': 194.1}, {'timestamp': 1495132200000, 'open': 195.95, 'high': 196, 'low': 186, 'close': 191, 'volume': 11428477, 'cp': 191.5}, {'timestamp': 1495391400000, 'open': 192.55, 'high': 194.4, 'low': 189.15, 'close': 190.25, 'volume': 9699691, 'cp': 190.6}, {'timestamp': 1495477800000, 'open': 190.6, 'high': 195.25, 'low': 184.55, 'close': 192, 'volume': 13372515, 'cp': 191.7}, {'timestamp': 1495564200000, 'open': 191.95, 'high': 193.65, 'low': 185.1, 'close': 187.05, 'volume': 11130641, 'cp': 186.9}, {'timestamp': 1495650600000, 'open': 188, 'high': 192, 'low': 185.85, 'close': 190.55, 'volume': 9696039, 'cp': 190.95}, {'timestamp': 1495737000000, 'open': 190.7, 'high': 203.15, 'low': 189.4, 'close': 198.4, 'volume': 17803837, 'cp': 198.25}, {'timestamp': 1495996200000, 'open': 198.3, 'high': 204.9, 'low': 197.25, 'close': 201.25, 'volume': 12516450, 'cp': 201.8}, {'timestamp': 1496082600000, 'open': 202.45, 'high': 210.35, 'low': 201.15, 'close': 203.15, 'volume': 27444380, 'cp': 203.65}]
#print (shooting_star_OHLCdata)
shooting_star_res=pr.Recognize_Shooting_Star(shooting_star_OHLCdata,197,205,pr.calculate_rsi(shooting_star_OHLCdata))
print(shooting_star_res)
print ("shooting star test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bullish engulfing pattern test case 1 start##########")
#bullish_engulfing1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'UFO'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 5).date())
bullish_engulfing1_OHLCdata=[{'timestamp': 1533839400000, 'open': 370, 'high': 373, 'low': 361.05, 'close': 364, 'volume': 13755, 'cp': 367}, {'timestamp': 1534098600000, 'open': 361, 'high': 368.7, 'low': 360, 'close': 363.8, 'volume': 8984, 'cp': 363}, {'timestamp': 1534185000000, 'open': 364.05, 'high': 366.25, 'low': 362.75, 'close': 363.65, 'volume': 9193, 'cp': 363}, {'timestamp': 1534357800000, 'open': 361.2, 'high': 372, 'low': 360.5, 'close': 368.35, 'volume': 6392, 'cp': 372}, {'timestamp': 1534444200000, 'open': 367, 'high': 373, 'low': 365, 'close': 370.65, 'volume': 6456, 'cp': 371.4}, {'timestamp': 1534703400000, 'open': 370, 'high': 377, 'low': 370, 'close': 372.65, 'volume': 11712, 'cp': 370.05}, {'timestamp': 1534789800000, 'open': 371.1, 'high': 373.35, 'low': 368.35, 'close': 371.9, 'volume': 9204, 'cp': 370}, {'timestamp': 1534962600000, 'open': 370.05, 'high': 377.45, 'low': 370, 'close': 372.35, 'volume': 7051, 'cp': 372.1}, {'timestamp': 1535049000000, 'open': 372.4, 'high': 377.9, 'low': 372, 'close': 372.2, 'volume': 5870, 'cp': 374.75}, {'timestamp': 1535308200000, 'open': 374.4, 'high': 375.55, 'low': 365, 'close': 366.85, 'volume': 8581, 'cp': 366}, {'timestamp': 1535394600000, 'open': 365.15, 'high': 374.1, 'low': 363, 'close': 369.1, 'volume': 16439, 'cp': 374.1}, {'timestamp': 1535481000000, 'open': 370.05, 'high': 372, 'low': 364.6, 'close': 368.35, 'volume': 13880, 'cp': 367.4}, {'timestamp': 1535567400000, 'open': 370.05, 'high': 370.05, 'low': 365.05, 'close': 369.45, 'volume': 6430, 'cp': 369.95}, {'timestamp': 1535653800000, 'open': 365.05, 'high': 372.5, 'low': 365.05, 'close': 368.2, 'volume': 9727, 'cp': 367}, {'timestamp': 1535913000000, 'open': 367, 'high': 370.55, 'low': 365.1, 'close': 366.05, 'volume': 7224, 'cp': 366.85}, {'timestamp': 1535999400000, 'open': 366.2, 'high': 368, 'low': 365, 'close': 365.7, 'volume': 14368, 'cp': 365}, {'timestamp': 1536085800000, 'open': 364.05, 'high': 385.95, 'low': 363.95, 'close': 383.2, 'volume': 27723, 'cp': 383}]
#print (bullish_engulfing1_OHLCdata)
bullish_engulfing1_res=pr.Recognize_Bullish_Engulfing_pattern(bullish_engulfing1_OHLCdata,335,399,pr.calculate_rsi(bullish_engulfing1_OHLCdata))
print(bullish_engulfing1_res)
print ("bullish engulfing pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bullish engulfing pattern test case 2 start##########")
#bullish_engulfing2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'TATACOMM'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bullish_engulfing2_OHLCdata=[{'timestamp': 1533839400000, 'open': 585.55, 'high': 588.7, 'low': 551.2, 'close': 568.6, 'volume': 1022292, 'cp': 567.5}, {'timestamp': 1534098600000, 'open': 568.8, 'high': 568.8, 'low': 554.55, 'close': 559.3, 'volume': 180486, 'cp': 559.4}, {'timestamp': 1534185000000, 'open': 558.9, 'high': 572, 'low': 553.35, 'close': 565.65, 'volume': 271117, 'cp': 570.4}, {'timestamp': 1534357800000, 'open': 568.9, 'high': 568.9, 'low': 555.3, 'close': 558.05, 'volume': 246432, 'cp': 558}, {'timestamp': 1534444200000, 'open': 560.8, 'high': 564.05, 'low': 550.1, 'close': 553.85, 'volume': 175311, 'cp': 557}, {'timestamp': 1534703400000, 'open': 556.25, 'high': 563.15, 'low': 547, 'close': 551.8, 'volume': 237281, 'cp': 551.2}, {'timestamp': 1534789800000, 'open': 551, 'high': 558.55, 'low': 547.55, 'close': 549.85, 'volume': 154980, 'cp': 548.75}, {'timestamp': 1534962600000, 'open': 548.9, 'high': 556.85, 'low': 543.35, 'close': 549.2, 'volume': 136242, 'cp': 549.25}, {'timestamp': 1535049000000, 'open': 549.3, 'high': 550, 'low': 539.35, 'close': 542.5, 'volume': 186949, 'cp': 544}, {'timestamp': 1535308200000, 'open': 543.7, 'high': 554.45, 'low': 543.7, 'close': 551.3, 'volume': 261706, 'cp': 551.4}, {'timestamp': 1535394600000, 'open': 553, 'high': 556.15, 'low': 542.65, 'close': 547.6, 'volume': 313622, 'cp': 545}, {'timestamp': 1535481000000, 'open': 545, 'high': 552, 'low': 542.75, 'close': 548.85, 'volume': 144131, 'cp': 547.95}, {'timestamp': 1535567400000, 'open': 550, 'high': 563.55, 'low': 546, 'close': 559.45, 'volume': 588974, 'cp': 562.05}, {'timestamp': 1535653800000, 'open': 560, 'high': 565, 'low': 536.6, 'close': 540, 'volume': 448930, 'cp': 540}, {'timestamp': 1535913000000, 'open': 544, 'high': 545.7, 'low': 528.05, 'close': 531.7, 'volume': 237801, 'cp': 531.8}, {'timestamp': 1535999400000, 'open': 531.8, 'high': 534.85, 'low': 515.8, 'close': 518.85, 'volume': 708695, 'cp': 518.05}, {'timestamp': 1536085800000, 'open': 515, 'high': 520.9, 'low': 505, 'close': 513.4, 'volume': 576067, 'cp': 511}, {'timestamp': 1536172200000, 'open': 511, 'high': 519.6, 'low': 506.65, 'close': 517.05, 'volume': 376049, 'cp': 518.5}]
#print (bullish_engulfing2_OHLCdata)
bullish_engulfing2_res=pr.Recognize_Bullish_Engulfing_pattern(bullish_engulfing2_OHLCdata,482,539,pr.calculate_rsi(bullish_engulfing2_OHLCdata))
print(bullish_engulfing2_res)
print ("bullish engulfing pattern test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bearish engulfing pattern test case 1 start##########")
#bearish_engulfing1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'NATIONALUM'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bearish_engulfing1_OHLCdata=[{'timestamp': 1533839400000, 'open': 73, 'high': 73.35, 'low': 69.65, 'close': 69.95, 'volume': 11134516, 'cp': 69.9}, {'timestamp': 1534098600000, 'open': 69.5, 'high': 72.9, 'low': 68.1, 'close': 70.9, 'volume': 12687215, 'cp': 71.5}, {'timestamp': 1534185000000, 'open': 71.4, 'high': 72.35, 'low': 69.85, 'close': 70.25, 'volume': 9916654, 'cp': 71.05}, {'timestamp': 1534357800000, 'open': 70, 'high': 71.05, 'low': 67.75, 'close': 68.1, 'volume': 16169534, 'cp': 67.9}, {'timestamp': 1534444200000, 'open': 68.7, 'high': 70.8, 'low': 68.55, 'close': 68.8, 'volume': 17697359, 'cp': 68.8}, {'timestamp': 1534703400000, 'open': 69.3, 'high': 72.1, 'low': 67.8, 'close': 71.55, 'volume': 16469743, 'cp': 72}, {'timestamp': 1534789800000, 'open': 72.5, 'high': 73.45, 'low': 71.65, 'close': 72.5, 'volume': 12852580, 'cp': 72.3}, {'timestamp': 1534962600000, 'open': 72, 'high': 72, 'low': 69.55, 'close': 70.35, 'volume': 6242256, 'cp': 70.55}, {'timestamp': 1535049000000, 'open': 69.95, 'high': 72.6, 'low': 68.8, 'close': 72.2, 'volume': 10992103, 'cp': 72}, {'timestamp': 1535308200000, 'open': 73, 'high': 75.5, 'low': 72.7, 'close': 74.4, 'volume': 20098213, 'cp': 74.1}, {'timestamp': 1535394600000, 'open': 74.7, 'high': 75.65, 'low': 72.7, 'close': 74.95, 'volume': 11226881, 'cp': 75.15}, {'timestamp': 1535481000000, 'open': 76, 'high': 77.8, 'low': 75.9, 'close': 76.7, 'volume': 13917981, 'cp': 76.7}, {'timestamp': 1535567400000, 'open': 77.8, 'high': 78.45, 'low': 75.3, 'close': 76.2, 'volume': 19629858, 'cp': 77.1}, {'timestamp': 1535653800000, 'open': 76.35, 'high': 77.15, 'low': 74.55, 'close': 74.85, 'volume': 9865262, 'cp': 74.9}, {'timestamp': 1535913000000, 'open': 75.4, 'high': 76.6, 'low': 74.6, 'close': 75.2, 'volume': 6493225, 'cp': 75.35}, {'timestamp': 1535999400000, 'open': 75.25, 'high': 75.45, 'low': 72.4, 'close': 73.05, 'volume': 7694982, 'cp': 72.85}, {'timestamp': 1536085800000, 'open': 73.45, 'high': 76.65, 'low': 72.45, 'close': 76.35, 'volume': 13156131, 'cp': 76.25}, {'timestamp': 1536172200000, 'open': 77.45, 'high': 77.45, 'low': 69.65, 'close': 71.35, 'volume': 35583057, 'cp': 71.2}]
#print (bearish_engulfing1_OHLCdata)
bearish_engulfing1_res=pr.Recognize_Bearish_Engulfing_pattern(bearish_engulfing1_OHLCdata,68,80,pr.calculate_rsi(bearish_engulfing1_OHLCdata))
print(bearish_engulfing1_res)
print ("bearish engulfing pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bearish engulfing pattern test case 2 start##########")
#bearish_engulfing2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'DECCANCE'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bearish_engulfing2_OHLCdata=[{'timestamp': 1533839400000, 'open': 457, 'high': 462.8, 'low': 430.05, 'close': 437.7, 'volume': 5365, 'cp': 439}, {'timestamp': 1534098600000, 'open': 450, 'high': 450, 'low': 425, 'close': 428.8, 'volume': 1126, 'cp': 425}, {'timestamp': 1534185000000, 'open': 422, 'high': 429.3, 'low': 418, 'close': 423.6, 'volume': 522, 'cp': 418.1}, {'timestamp': 1534357800000, 'open': 420.55, 'high': 421.5, 'low': 414.95, 'close': 419.95, 'volume': 1471, 'cp': 420}, {'timestamp': 1534444200000, 'open': 424.6, 'high': 425, 'low': 412, 'close': 416.45, 'volume': 5356, 'cp': 415.5}, {'timestamp': 1534703400000, 'open': 415, 'high': 420.9, 'low': 401, 'close': 403, 'volume': 9627, 'cp': 402}, {'timestamp': 1534789800000, 'open': 407.2, 'high': 417, 'low': 406.5, 'close': 411.4, 'volume': 5276, 'cp': 411.05}, {'timestamp': 1534962600000, 'open': 419, 'high': 419, 'low': 401, 'close': 411.15, 'volume': 842, 'cp': 413.4}, {'timestamp': 1535049000000, 'open': 411, 'high': 415, 'low': 408.05, 'close': 411.25, 'volume': 1279, 'cp': 412}, {'timestamp': 1535308200000, 'open': 409, 'high': 419, 'low': 402.45, 'close': 410, 'volume': 3110, 'cp': 408.2}, {'timestamp': 1535394600000, 'open': 410, 'high': 416.6, 'low': 404.1, 'close': 406.35, 'volume': 1551, 'cp': 405.35}, {'timestamp': 1535481000000, 'open': 405.35, 'high': 409.85, 'low': 398, 'close': 403.65, 'volume': 4989, 'cp': 405}, {'timestamp': 1535567400000, 'open': 408.9, 'high': 415.9, 'low': 398, 'close': 412.65, 'volume': 3967, 'cp': 415}, {'timestamp': 1535653800000, 'open': 412.65, 'high': 429, 'low': 406.85, 'close': 416.85, 'volume': 4452, 'cp': 415.25}, {'timestamp': 1535913000000, 'open': 415, 'high': 433.1, 'low': 406, 'close': 424.6, 'volume': 7330, 'cp': 425}, {'timestamp': 1535999400000, 'open': 423.15, 'high': 426.8, 'low': 410.4, 'close': 417.25, 'volume': 5798, 'cp': 415}, {'timestamp': 1536085800000, 'open': 417, 'high': 467.3, 'low': 412, 'close': 417.85, 'volume': 1749, 'cp': 416.5}, {'timestamp': 1536172200000, 'open': 422, 'high': 430, 'low': 412.1, 'close': 416.75, 'volume': 2018, 'cp': 414.6}]
#print (bearish_engulfing2_OHLCdata)
bearish_engulfing2_res=pr.Recognize_Bearish_Engulfing_pattern(bearish_engulfing2_OHLCdata,390,448,pr.calculate_rsi(bearish_engulfing2_OHLCdata))
print(bearish_engulfing2_res)
print ("bearish engulfing pattern test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bullish harami pattern test case 1 start##########")
#bullish_harami1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'GMBREW'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bullish_harami1_OHLCdata=[{'timestamp': 1533839400000, 'open': 706, 'high': 719, 'low': 690.15, 'close': 694.1, 'volume': 22893, 'cp': 696.2}, {'timestamp': 1534098600000, 'open': 699.5, 'high': 715, 'low': 690, 'close': 694.45, 'volume': 17813, 'cp': 692}, {'timestamp': 1534185000000, 'open': 692, 'high': 706.55, 'low': 687.5, 'close': 688.85, 'volume': 18414, 'cp': 687.65}, {'timestamp': 1534357800000, 'open': 692, 'high': 700, 'low': 686.1, 'close': 688.5, 'volume': 12760, 'cp': 686.5}, {'timestamp': 1534444200000, 'open': 690.15, 'high': 722.9, 'low': 690.15, 'close': 722.9, 'volume': 50093, 'cp': 722.9}, {'timestamp': 1534703400000, 'open': 730, 'high': 759, 'low': 723.5, 'close': 759, 'volume': 50043, 'cp': 759}, {'timestamp': 1534789800000, 'open': 790, 'high': 796.95, 'low': 766.6, 'close': 773.75, 'volume': 99894, 'cp': 770.2}, {'timestamp': 1534962600000, 'open': 779, 'high': 779, 'low': 754.35, 'close': 764.7, 'volume': 27702, 'cp': 763}, {'timestamp': 1535049000000, 'open': 770.8, 'high': 770.8, 'low': 750.6, 'close': 755.8, 'volume': 11060, 'cp': 750.6}, {'timestamp': 1535308200000, 'open': 755.8, 'high': 768, 'low': 753.1, 'close': 759.05, 'volume': 13778, 'cp': 762}, {'timestamp': 1535394600000, 'open': 759.05, 'high': 794, 'low': 755, 'close': 781.65, 'volume': 38986, 'cp': 778}, {'timestamp': 1535481000000, 'open': 790, 'high': 791.2, 'low': 764.55, 'close': 769.95, 'volume': 29342, 'cp': 765.5}, {'timestamp': 1535567400000, 'open': 770, 'high': 784.4, 'low': 765, 'close': 768.55, 'volume': 13326, 'cp': 769.65}, {'timestamp': 1535653800000, 'open': 767.1, 'high': 778, 'low': 766, 'close': 770.7, 'volume': 10031, 'cp': 770}, {'timestamp': 1535913000000, 'open': 778.55, 'high': 778.55, 'low': 755, 'close': 766.75, 'volume': 12011, 'cp': 770}, {'timestamp': 1535999400000, 'open': 769.75, 'high': 769.75, 'low': 753, 'close': 755.65, 'volume': 11779, 'cp': 754}, {'timestamp': 1536085800000, 'open': 753, 'high': 757.75, 'low': 735, 'close': 742.5, 'volume': 11658, 'cp': 748}, {'timestamp': 1536172200000, 'open': 747.8, 'high': 756.6, 'low': 735, 'close': 748.4, 'volume': 15632, 'cp': 746.45}]
#print (bullish_harami1_OHLCdata)
bullish_harami1_res=pr.Recognize_Bullish_Harami_pattern(bullish_harami1_OHLCdata,706,801,pr.calculate_rsi(bullish_harami1_OHLCdata))
print(bullish_harami1_res)
print ("bullish harami pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bullish harami pattern test case 2 start##########")
#bullish_harami2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'HDFCBANK'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bullish_harami2_OHLCdata=[{'timestamp': 1533839400000, 'open': 2123.5, 'high': 2123.8, 'low': 2098, 'close': 2114.45, 'volume': 1360735, 'cp': 2115}, {'timestamp': 1534098600000, 'open': 2084, 'high': 2103.95, 'low': 2080, 'close': 2091.65, 'volume': 2513563, 'cp': 2091}, {'timestamp': 1534185000000, 'open': 2098, 'high': 2105, 'low': 2087.2, 'close': 2089.1, 'volume': 1233991, 'cp': 2089.3}, {'timestamp': 1534357800000, 'open': 2083, 'high': 2086.7, 'low': 2066.4, 'close': 2075.7, 'volume': 2656290, 'cp': 2075.4}, {'timestamp': 1534444200000, 'open': 2082.9, 'high': 2093.05, 'low': 2071.65, 'close': 2077.35, 'volume': 1516332, 'cp': 2077}, {'timestamp': 1534703400000, 'open': 2075, 'high': 2107.6, 'low': 2075, 'close': 2096.2, 'volume': 1952784, 'cp': 2098.3}, {'timestamp': 1534789800000, 'open': 2098, 'high': 2112, 'low': 2092.65, 'close': 2096.05, 'volume': 1944080, 'cp': 2097}, {'timestamp': 1534962600000, 'open': 2105, 'high': 2107, 'low': 2076.85, 'close': 2079.9, 'volume': 3143638, 'cp': 2079.9}, {'timestamp': 1535049000000, 'open': 2071, 'high': 2093.6, 'low': 2066.05, 'close': 2069.85, 'volume': 2428657, 'cp': 2070}, {'timestamp': 1535308200000, 'open': 2077, 'high': 2088.5, 'low': 2070.25, 'close': 2080.45, 'volume': 3143697, 'cp': 2082.95}, {'timestamp': 1535394600000, 'open': 2088, 'high': 2098.25, 'low': 2078.8, 'close': 2094.85, 'volume': 2493383, 'cp': 2097.4}, {'timestamp': 1535481000000, 'open': 2092.15, 'high': 2094.05, 'low': 2072.75, 'close': 2078.5, 'volume': 2468423, 'cp': 2082.9}, {'timestamp': 1535567400000, 'open': 2083.6, 'high': 2087.9, 'low': 2061.85, 'close': 2066.1, 'volume': 5456865, 'cp': 2068}, {'timestamp': 1535653800000, 'open': 2069.2, 'high': 2078.75, 'low': 2058.25, 'close': 2061.2, 'volume': 3942875, 'cp': 2059.95}, {'timestamp': 1535913000000, 'open': 2069.4, 'high': 2078.95, 'low': 2063.5, 'close': 2075.05, 'volume': 1915402, 'cp': 2073.95}, {'timestamp': 1535999400000, 'open': 2076.9, 'high': 2077.95, 'low': 2049, 'close': 2051.8, 'volume': 1782634, 'cp': 2052.05}, {'timestamp': 1536085800000, 'open': 2053.8, 'high': 2060.2, 'low': 2035.55, 'close': 2045.85, 'volume': 1410377, 'cp': 2044.35}, {'timestamp': 1536172200000, 'open': 2049, 'high': 2059, 'low': 2032.6, 'close': 2052.2, 'volume': 2600603, 'cp': 2050.15}]
#print (bullish_harami2_OHLCdata)
bullish_harami2_res=pr.Recognize_Bullish_Harami_pattern(bullish_harami2_OHLCdata,2008,2077,pr.calculate_rsi(bullish_harami2_OHLCdata))
print(bullish_harami2_res)
print ("bullish harami pattern test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bearish harami pattern test case 1 start##########")
#bearish_harami1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'SMARTLINK'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 5).date())
bearish_harami1_OHLCdata=[{'timestamp': 1533839400000, 'open': 96.5, 'high': 96.7, 'low': 94.25, 'close': 95.05, 'volume': 7347, 'cp': 94.25}, {'timestamp': 1534098600000, 'open': 94.15, 'high': 96.45, 'low': 94.15, 'close': 95.45, 'volume': 4978, 'cp': 95}, {'timestamp': 1534185000000, 'open': 95, 'high': 95.95, 'low': 94, 'close': 95, 'volume': 5497, 'cp': 95}, {'timestamp': 1534357800000, 'open': 96.35, 'high': 96.35, 'low': 93.75, 'close': 94.35, 'volume': 1200, 'cp': 94.35}, {'timestamp': 1534444200000, 'open': 94.55, 'high': 96.4, 'low': 94.55, 'close': 95.45, 'volume': 2084, 'cp': 96}, {'timestamp': 1534703400000, 'open': 95.05, 'high': 95.85, 'low': 94.1, 'close': 94.7, 'volume': 3733, 'cp': 94.75}, {'timestamp': 1534789800000, 'open': 94.7, 'high': 95.3, 'low': 94.15, 'close': 94.65, 'volume': 1431, 'cp': 95}, {'timestamp': 1534962600000, 'open': 94.05, 'high': 95, 'low': 93, 'close': 93.1, 'volume': 6805, 'cp': 93.2}, {'timestamp': 1535049000000, 'open': 94.45, 'high': 95, 'low': 92.5, 'close': 93.2, 'volume': 4999, 'cp': 93.8}, {'timestamp': 1535308200000, 'open': 92.55, 'high': 94.5, 'low': 92.55, 'close': 93.85, 'volume': 5216, 'cp': 94}, {'timestamp': 1535394600000, 'open': 93.5, 'high': 95.5, 'low': 93, 'close': 94.95, 'volume': 6097, 'cp': 94.25}, {'timestamp': 1535481000000, 'open': 94.3, 'high': 99, 'low': 94, 'close': 95.8, 'volume': 12992, 'cp': 95.8}, {'timestamp': 1535567400000, 'open': 93.55, 'high': 98.75, 'low': 93.55, 'close': 96.7, 'volume': 11201, 'cp': 96.75}, {'timestamp': 1535653800000, 'open': 96, 'high': 98.05, 'low': 95.45, 'close': 97.9, 'volume': 11884, 'cp': 97.2}, {'timestamp': 1535913000000, 'open': 96.25, 'high': 98.7, 'low': 96, 'close': 96.5, 'volume': 5628, 'cp': 96.4}, {'timestamp': 1535999400000, 'open': 97.8, 'high': 99.9, 'low': 96.25, 'close': 99.15, 'volume': 12966, 'cp': 99}, {'timestamp': 1536085800000, 'open': 99, 'high': 99.7, 'low': 96.8, 'close': 98.8, 'volume': 11316, 'cp': 98.15}]
#print (bearish_harami1_OHLCdata)
bearish_harami1_res=pr.Recognize_Bearish_Harami_pattern(bearish_harami1_OHLCdata,93,104,pr.calculate_rsi(bearish_harami1_OHLCdata))
print(bearish_harami1_res)
print ("bearish harami pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("bearish harami pattern test case 2 start##########")
#bearish_harami2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'WABAG'), OHLCInterval.Day_1, datetime(2018,8, 10).date(), datetime(2018, 9, 6).date())
bearish_harami2_OHLCdata=[{'timestamp': 1533839400000, 'open': 376, 'high': 384.35, 'low': 367.9, 'close': 372.7, 'volume': 448079, 'cp': 367.9}, {'timestamp': 1534098600000, 'open': 366.95, 'high': 377, 'low': 361.65, 'close': 371.1, 'volume': 192004, 'cp': 377}, {'timestamp': 1534185000000, 'open': 374.5, 'high': 400, 'low': 373.15, 'close': 397.05, 'volume': 391708, 'cp': 399}, {'timestamp': 1534357800000, 'open': 399.3, 'high': 405, 'low': 385.25, 'close': 391.7, 'volume': 160283, 'cp': 390.9}, {'timestamp': 1534444200000, 'open': 393.65, 'high': 398.65, 'low': 382.4, 'close': 388.05, 'volume': 189133, 'cp': 388.55}, {'timestamp': 1534703400000, 'open': 390.3, 'high': 394.8, 'low': 387.5, 'close': 389, 'volume': 52191, 'cp': 390}, {'timestamp': 1534789800000, 'open': 387, 'high': 395, 'low': 383.15, 'close': 385.8, 'volume': 125252, 'cp': 384.95}, {'timestamp': 1534962600000, 'open': 385, 'high': 392, 'low': 382.55, 'close': 389.75, 'volume': 289950, 'cp': 391.6}, {'timestamp': 1535049000000, 'open': 391, 'high': 392.7, 'low': 380.2, 'close': 382.25, 'volume': 50361, 'cp': 381}, {'timestamp': 1535308200000, 'open': 384.4, 'high': 385.5, 'low': 376, 'close': 377.65, 'volume': 46662, 'cp': 378.5}, {'timestamp': 1535394600000, 'open': 379.8, 'high': 383.95, 'low': 378, 'close': 382.05, 'volume': 56079, 'cp': 382.1}, {'timestamp': 1535481000000, 'open': 383, 'high': 390, 'low': 382.65, 'close': 386.95, 'volume': 74765, 'cp': 387.5}, {'timestamp': 1535567400000, 'open': 392, 'high': 413.15, 'low': 385.25, 'close': 388.65, 'volume': 651153, 'cp': 387.5}, {'timestamp': 1535653800000, 'open': 389.95, 'high': 397.15, 'low': 385, 'close': 388.35, 'volume': 181959, 'cp': 389.05}, {'timestamp': 1535913000000, 'open': 393, 'high': 393, 'low': 385.05, 'close': 385.95, 'volume': 56506, 'cp': 385.8}, {'timestamp': 1535999400000, 'open': 387.95, 'high': 390, 'low': 380.4, 'close': 382.5, 'volume': 57322, 'cp': 385}, {'timestamp': 1536085800000, 'open': 384, 'high': 392, 'low': 380.45, 'close': 388.4, 'volume': 93803, 'cp': 388.9}, {'timestamp': 1536172200000, 'open': 388.4, 'high': 396.8, 'low': 384.55, 'close': 387.8, 'volume': 86387, 'cp': 388.55}]
#print (bearish_harami2_OHLCdata)
bearish_harami2_res=pr.Recognize_Bearish_Harami_pattern(bearish_harami2_OHLCdata,365,397,pr.calculate_rsi(bearish_harami2_OHLCdata))
print(bearish_harami2_res)
print ("bearish harami pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("morning star pattern test case 1 start##########")
#morning_star1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'SUNPHARMA'), OHLCInterval.Day_1, datetime(2017,11, 1).date(), datetime(2017, 12, 8).date())
morning_star1_OHLCdata=[{'timestamp': 1509474600000, 'open': 553.05, 'high': 555.9, 'low': 546.4, 'close': 548.7, 'volume': 3304676, 'cp': 548.35}, {'timestamp': 1509561000000, 'open': 548, 'high': 572.3, 'low': 547.65, 'close': 563.45, 'volume': 8413439, 'cp': 563.9}, {'timestamp': 1509667200000, 'open': 565, 'high': 567.8, 'low': 550.2, 'close': 551.25, 'volume': 3595527, 'cp': 0}, {'timestamp': 1509906600000, 'open': 553, 'high': 555.9, 'low': 539.3, 'close': 541.2, 'volume': 3987042, 'cp': 541.2}, {'timestamp': 1509993000000, 'open': 545, 'high': 549.8, 'low': 513.25, 'close': 527.6, 'volume': 8930638, 'cp': 529}, {'timestamp': 1510079400000, 'open': 533, 'high': 545.4, 'low': 532.4, 'close': 537.8, 'volume': 4530173, 'cp': 539}, {'timestamp': 1510165800000, 'open': 555, 'high': 555, 'low': 527.05, 'close': 533.9, 'volume': 4591954, 'cp': 534}, {'timestamp': 1510272000000, 'open': 530, 'high': 534.2, 'low': 523.75, 'close': 527.85, 'volume': 3187021, 'cp': 0}, {'timestamp': 1510511400000, 'open': 526.8, 'high': 541.6, 'low': 519.1, 'close': 532.55, 'volume': 5498679, 'cp': 533.85}, {'timestamp': 1510597800000, 'open': 533.4, 'high': 537.9, 'low': 517.1, 'close': 526.05, 'volume': 5853721, 'cp': 523.5}, {'timestamp': 1510684200000, 'open': 516, 'high': 520, 'low': 501.1, 'close': 504.65, 'volume': 8629268, 'cp': 504.55}, {'timestamp': 1510770600000, 'open': 505, 'high': 510.8, 'low': 498.2, 'close': 508.55, 'volume': 5351102, 'cp': 509}, {'timestamp': 1510857000000, 'open': 510.2, 'high': 522.15, 'low': 510.05, 'close': 517.1, 'volume': 3515919, 'cp': 517}, {'timestamp': 1511116200000, 'open': 520, 'high': 521.85, 'low': 514.3, 'close': 517.15, 'volume': 1977341, 'cp': 517}, {'timestamp': 1511202600000, 'open': 518, 'high': 541.5, 'low': 514.55, 'close': 538.05, 'volume': 7852414, 'cp': 538.8}, {'timestamp': 1511289000000, 'open': 539.75, 'high': 544.65, 'low': 530.15, 'close': 535.25, 'volume': 4294740, 'cp': 537}, {'timestamp': 1511375400000, 'open': 535, 'high': 547.5, 'low': 531.85, 'close': 544.75, 'volume': 3972361, 'cp': 546}, {'timestamp': 1511481600000, 'open': 545.75, 'high': 551, 'low': 541.7, 'close': 549.5, 'volume': 4099139, 'cp': 0}, {'timestamp': 1511721000000, 'open': 541.1, 'high': 553.9, 'low': 538.25, 'close': 551.55, 'volume': 3833249, 'cp': 550.7}, {'timestamp': 1511807400000, 'open': 551, 'high': 556.35, 'low': 541.1, 'close': 543.15, 'volume': 2493500, 'cp': 542.3}, {'timestamp': 1511893800000, 'open': 543, 'high': 549.65, 'low': 541.5, 'close': 547.1, 'volume': 2174433, 'cp': 548.35}, {'timestamp': 1511980200000, 'open': 547.05, 'high': 554.95, 'low': 537.7, 'close': 539.95, 'volume': 5950729, 'cp': 540.35}, {'timestamp': 1512086400000, 'open': 544, 'high': 545.45, 'low': 522.25, 'close': 525.95, 'volume': 3164938, 'cp': 0}, {'timestamp': 1512325800000, 'open': 529.8, 'high': 529.8, 'low': 516.5, 'close': 520.75, 'volume': 3306680, 'cp': 523}, {'timestamp': 1512412200000, 'open': 518.55, 'high': 528, 'low': 517.65, 'close': 523.15, 'volume': 3479216, 'cp': 522}, {'timestamp': 1512498600000, 'open': 525.8, 'high': 526.5, 'low': 510.1, 'close': 511.35, 'volume': 3859141, 'cp': 510.8}, {'timestamp': 1512585000000, 'open': 510, 'high': 515.55, 'low': 506, 'close': 510.35, 'volume': 4470510, 'cp': 511.25}, {'timestamp': 1512691200000, 'open': 513.5, 'high': 524, 'low': 511, 'close': 521.85, 'volume': 3394236, 'cp': 521.85}]
#print (morning_star1_OHLCdata)
morning_star1_res=pr.Recognize_Morning_Star_pattern(morning_star1_OHLCdata,8750,9185,pr.calculate_rsi(morning_star1_OHLCdata))
print(morning_star1_res)
print ("morning star pattern test case 1 end##########")
exit(0)
print ("---------------------------------------")
print ("---------------------------------------")

print ("evening star pattern test case 1 start##########")
#evening_star1_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'HINDUNILVR'), OHLCInterval.Day_1, datetime(2018,8, 1).date(), datetime(2018, 8, 28).date())
evening_star1_OHLCdata=[{'timestamp': 1533061800000, 'open': 1732.95, 'high': 1743, 'low': 1718.6, 'close': 1734.3, 'volume': 1191134, 'cp': 1742.25}, {'timestamp': 1533148200000, 'open': 1742.25, 'high': 1759.75, 'low': 1739, 'close': 1748.5, 'volume': 1127209, 'cp': 1750}, {'timestamp': 1533234600000, 'open': 1754, 'high': 1767.35, 'low': 1746.9, 'close': 1763, 'volume': 758933, 'cp': 1760.5}, {'timestamp': 1533493800000, 'open': 1760, 'high': 1760, 'low': 1715.05, 'close': 1730.3, 'volume': 1629015, 'cp': 1730}, {'timestamp': 1533580200000, 'open': 1730.8, 'high': 1742, 'low': 1724, 'close': 1730.05, 'volume': 863577, 'cp': 1730}, {'timestamp': 1533666600000, 'open': 1728, 'high': 1763, 'low': 1721.35, 'close': 1757.15, 'volume': 1423256, 'cp': 1761.9}, {'timestamp': 1533753000000, 'open': 1761.5, 'high': 1765, 'low': 1738.2, 'close': 1754.2, 'volume': 939345, 'cp': 1755}, {'timestamp': 1533839400000, 'open': 1750, 'high': 1763.6, 'low': 1741.5, 'close': 1752.7, 'volume': 730724, 'cp': 1751}, {'timestamp': 1534098600000, 'open': 1739, 'high': 1756.5, 'low': 1725.75, 'close': 1728.85, 'volume': 691024, 'cp': 1730.4}, {'timestamp': 1534185000000, 'open': 1729, 'high': 1759.3, 'low': 1729, 'close': 1744.25, 'volume': 850399, 'cp': 1743.9}, {'timestamp': 1534357800000, 'open': 1741, 'high': 1751.95, 'low': 1730.6, 'close': 1737.4, 'volume': 638454, 'cp': 1740.95}, {'timestamp': 1534444200000, 'open': 1741.1, 'high': 1788.6, 'low': 1731.75, 'close': 1784.75, 'volume': 1420289, 'cp': 1784}, {'timestamp': 1534703400000, 'open': 1790, 'high': 1808.65, 'low': 1773.2, 'close': 1777, 'volume': 924623, 'cp': 1773.8}, {'timestamp': 1534789800000, 'open': 1777, 'high': 1777, 'low': 1750, 'close': 1752.5, 'volume': 1169476, 'cp': 1753.3}, {'timestamp': 1534962600000, 'open': 1764.95, 'high': 1783.5, 'low': 1757.5, 'close': 1772.8, 'volume': 1375102, 'cp': 1773.25}, {'timestamp': 1535049000000, 'open': 1773.25, 'high': 1789, 'low': 1762.25, 'close': 1780.95, 'volume': 866648, 'cp': 1783.25}, {'timestamp': 1535308200000, 'open': 1791, 'high': 1798, 'low': 1778.7, 'close': 1792.3, 'volume': 627163, 'cp': 1791.8}, {'timestamp': 1535394600000, 'open': 1789, 'high': 1790.95, 'low': 1767.85, 'close': 1771.2, 'volume': 991764, 'cp': 1771.9}]
#print (evening_star1_OHLCdata)
evening_star1_res=pr.Recognize_Evening_Star_pattern(evening_star1_OHLCdata,1526,1672,pr.calculate_rsi(evening_star1_OHLCdata))
print(evening_star1_res)
print ("evening star pattern test case 1 end##########")

print ("---------------------------------------")
print ("---------------------------------------")

print ("evening star pattern test case 2 start##########")
#evening_star2_OHLCdata=u.get_ohlc(u.get_instrument_by_symbol('NSE_EQ', 'SEAMECLTD'), OHLCInterval.Day_1, datetime(2018,8, 1).date(), datetime(2018, 8, 24).date())
evening_star2_OHLCdata=[{'timestamp': 1533061800000, 'open': 292, 'high': 294.95, 'low': 285, 'close': 293.45, 'volume': 8182, 'cp': 294.4}, {'timestamp': 1533148200000, 'open': 293.95, 'high': 302.5, 'low': 286.6, 'close': 298.25, 'volume': 20247, 'cp': 297}, {'timestamp': 1533234600000, 'open': 309, 'high': 309, 'low': 290.25, 'close': 300.25, 'volume': 13162, 'cp': 302}, {'timestamp': 1533493800000, 'open': 307, 'high': 307, 'low': 295, 'close': 296.35, 'volume': 2941, 'cp': 295}, {'timestamp': 1533580200000, 'open': 295.1, 'high': 300, 'low': 294.05, 'close': 295, 'volume': 3804, 'cp': 295}, {'timestamp': 1533666600000, 'open': 286, 'high': 293.15, 'low': 283.1, 'close': 287.45, 'volume': 9840, 'cp': 289}, {'timestamp': 1533753000000, 'open': 278.15, 'high': 293.9, 'low': 278.15, 'close': 287.2, 'volume': 1888, 'cp': 287}, {'timestamp': 1533839400000, 'open': 291, 'high': 291, 'low': 279, 'close': 288.05, 'volume': 16778, 'cp': 284}, {'timestamp': 1534098600000, 'open': 282, 'high': 288.75, 'low': 280.6, 'close': 288.2, 'volume': 2786, 'cp': 288.75}, {'timestamp': 1534185000000, 'open': 295.1, 'high': 302.6, 'low': 286.3, 'close': 289.05, 'volume': 4581, 'cp': 289.9}, {'timestamp': 1534357800000, 'open': 294.9, 'high': 294.9, 'low': 280, 'close': 284.7, 'volume': 16604, 'cp': 286.5}, {'timestamp': 1534444200000, 'open': 288.8, 'high': 298, 'low': 283, 'close': 296.15, 'volume': 20802, 'cp': 298}, {'timestamp': 1534703400000, 'open': 297, 'high': 302, 'low': 290, 'close': 294.25, 'volume': 5176, 'cp': 295}, {'timestamp': 1534789800000, 'open': 291.3, 'high': 293, 'low': 290.7, 'close': 292.7, 'volume': 1170, 'cp': 290.7}, {'timestamp': 1534962600000, 'open': 293, 'high': 295, 'low': 288.5, 'close': 292.85, 'volume': 4008, 'cp': 294.85}, {'timestamp': 1535049000000, 'open': 287.7, 'high': 292, 'low': 282.65, 'close': 284.35, 'volume': 3460, 'cp': 284.1}]
#print (evening_star2_OHLCdata)
evening_star2_res=pr.Recognize_Evening_Star_pattern(evening_star2_OHLCdata,248,280,pr.calculate_rsi(evening_star2_OHLCdata))
print(evening_star2_res)
print ("evening star pattern test case 2 end##########")

print ("---------------------------------------")
print ("---------------------------------------")